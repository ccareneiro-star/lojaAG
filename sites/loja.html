<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AG Personalizados</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos personalizados se necessário */
        .product-image {
            height: 160px;
            object-fit: cover;
            width: 100%;
        }
        .cart-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React e ReactDOM via CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        // Código React convertido para funcionar diretamente no HTML
        const { useState, useEffect } = React;

        const SAMPLE_PRODUCTS = [
            { 
                id: "p1", 
                title: "Caneca Personalizada - Floral", 
                price: 39.9, 
                desc: "Caneca cerâmica 300ml com estampa floral personalizada.", 
                img: "https://images.unsplash.com/photo-1544025162-d76694265947?w=800&q=80", 
            },
            { 
                id: "p2", 
                title: "Camiseta Personalizada - Básica", 
                price: 59.9, 
                desc: "Camiseta algodão 100% com estampa personalizada (vários tamanhos).", 
                img: "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=800&q=80", 
            },
            { 
                id: "p3", 
                title: "Chaveiro Acrílico", 
                price: 14.9, 
                desc: "Chaveiro acrílico com arte impressa resistente.", 
                img: "https://images.unsplash.com/photo-1520975914658-9d3b1f9a7cde?w=800&q=80", 
            },
            { 
                id: "p4", 
                title: "Placa Decorativa - MDF", 
                price: 69.0, 
                desc: "Placa MDF com acabamento liso — perfeito para presente.", 
                img: "https://images.unsplash.com/photo-1507668077129-56f1b7d0f7a2?w=800&q=80", 
            },
            { 
                id: "p5", 
                title: "Adesivo Personalizado", 
                price: 9.5, 
                desc: "Adesivos de alta qualidade, recorte especial e à prova d'água.", 
                img: "https://images.unsplash.com/photo-1481833761820-0509d3217039?w=800&q=80", 
            },
            { 
                id: "p6", 
                title: "Capa de Celular Personalizada", 
                price: 49.0, 
                desc: "Capinha compatível com os modelos mais populares — impressão em alta definição.", 
                img: "https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&q=80", 
            },
        ];

        function useLocalStorageState(key, initial) {
            const [state, setState] = useState(() => {
                try {
                    const raw = localStorage.getItem(key);
                    return raw ? JSON.parse(raw) : initial;
                } catch (e) {
                    return initial;
                }
            });
            
            useEffect(() => {
                try {
                    localStorage.setItem(key, JSON.stringify(state));
                } catch (e) {}
            }, [key, state]);
            
            return [state, setState];
        }

        function LojaPersonalizados() {
            const [route, setRoute] = useState("home");
            const [products] = useState(SAMPLE_PRODUCTS);
            const [cart, setCart] = useLocalStorageState("loja_cart_v1", []);
            const [query, setQuery] = useState("");

            useEffect(() => {
                document.title = "AG Personalizados";
            }, []);

            function addToCart(product, qty = 1) {
                setCart((prev) => {
                    const existing = prev.find((p) => p.id === product.id);
                    if (existing) {
                        return prev.map((p) => 
                            p.id === product.id ? { ...p, qty: p.qty + qty } : p
                        );
                    }
                    return [...prev, { ...product, qty }];
                });
            }

            function removeFromCart(productId) {
                setCart((prev) => prev.filter((p) => p.id !== productId));
            }

            function updateQty(productId, qty) {
                if (qty <= 0) return removeFromCart(productId);
                setCart((prev) => 
                    prev.map((p) => (p.id === productId ? { ...p, qty } : p))
                );
            }

            const subtotal = cart.reduce((s, item) => s + item.price * item.qty, 0);

            // Simple filtered list
            const filtered = products.filter(
                (p) => 
                    p.title.toLowerCase().includes(query.toLowerCase()) || 
                    p.desc.toLowerCase().includes(query.toLowerCase())
            );

            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="bg-white shadow">
                        <div className="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
                            <div className="flex items-center gap-6">
                                <h1 className="text-xl font-bold text-pink-600">AG Personalizados</h1>
                                <nav className="flex gap-1">
                                    <button 
                                        onClick={() => setRoute("home")} 
                                        className={`px-3 py-2 rounded ${route === "home" ? "bg-pink-50" : "hover:bg-gray-100"}`}
                                    >
                                        Home
                                    </button>
                                    <button 
                                        onClick={() => setRoute("produtos")} 
                                        className={`px-3 py-2 rounded ${route === "produtos" ? "bg-pink-50" : "hover:bg-gray-100"}`}
                                    >
                                        Produtos
                                    </button>
                                    <button 
                                        onClick={() => setRoute("sobre")} 
                                        className={`px-3 py-2 rounded ${route === "sobre" ? "bg-pink-50" : "hover:bg-gray-100"}`}
                                    >
                                        Sobre
                                    </button>
                                    <button 
                                        onClick={() => setRoute("contato")} 
                                        className={`px-3 py-2 rounded ${route === "contato" ? "bg-pink-50" : "hover:bg-gray-100"}`}
                                    >
                                        Contato
                                    </button>
                                </nav>
                            </div>
                            <div className="flex items-center gap-4">
                                <div className="hidden sm:block">
                                    <input 
                                        value={query}
                                        onChange={(e) => setQuery(e.target.value)}
                                        placeholder="Pesquisar produtos..."
                                        className="px-3 py-2 rounded border border-gray-200 w-72"
                                    />
                                </div>
                                <button onClick={() => setRoute("cart")} className="relative">
                                    <span className="sr-only">Ver carrinho</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 3h2l.4 2M7 13h10l4-8H5.4" />
                                        <circle cx="7" cy="20" r="1" />
                                        <circle cx="20" cy="20" r="1" />
                                    </svg>
                                    {cart.length > 0 && (
                                        <span className="absolute -right-2 -top-2 bg-pink-600 text-white rounded-full text-xs px-2">
                                            {cart.reduce((s, c) => s + c.qty, 0)}
                                        </span>
                                    )}
                                </button>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-6xl mx-auto p-4">
                        {route === "home" && (
                            <section className="grid grid-cols-1 md:grid-cols-2 gap-6 items-center mt-8">
                                <div>
                                    <h1 className="text-4xl font-extrabold mb-3">Itens personalizados feitos com carinho</h1>
                                    <p className="text-gray-700 mb-4">
                                        Presentes, lembranças e itens do dia a dia com design exclusivo. 
                                        Produzimos em pequenas quantidades e aceitamos pedidos personalizados.
                                    </p>
                                    <div className="flex gap-3">
                                        <button 
                                            onClick={() => setRoute("produtos")} 
                                            className="px-4 py-2 rounded shadow bg-pink-600 text-white"
                                        >
                                            Ver produtos
                                        </button>
                                        <button 
                                            onClick={() => setRoute("contato")} 
                                            className="px-4 py-2 rounded border"
                                        >
                                            Fazer encomenda
                                        </button>
                                    </div>
                                </div>
                                <div className="rounded-lg overflow-hidden shadow">
                                    <img 
                                        src="https://images.unsplash.com/photo-1520975914658-9d3b1f9a7cde?w=1200&q=80" 
                                        alt="Banner" 
                                        className="w-full h-64 object-cover" 
                                    />
                                </div>
                            </section>
                        )}

                        {route === "produtos" && (
                            <section className="mt-8">
                                <h2 className="text-2xl font-bold mb-4">Produtos</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {filtered.map((p) => (
                                        <div key={p.id} className="bg-white rounded shadow p-4 flex flex-col">
                                            <div className="h-40 mb-3 overflow-hidden rounded">
                                                <img src={p.img} alt={p.title} className="w-full h-full object-cover" />
                                            </div>
                                            <div className="flex-1">
                                                <h3 className="font-semibold">{p.title}</h3>
                                                <p className="text-sm text-gray-600">{p.desc}</p>
                                            </div>
                                            <div className="mt-3 flex items-center justify-between">
                                                <div className="text-lg font-bold">R$ {p.price.toFixed(2)}</div>
                                                <div className="flex gap-2">
                                                    <button 
                                                        onClick={() => addToCart(p)} 
                                                        className="px-3 py-1 rounded border"
                                                    >
                                                        Adicionar
                                                    </button>
                                                    <button 
                                                        onClick={() => { 
                                                            addToCart(p); 
                                                            setRoute('cart'); 
                                                        }} 
                                                        className="px-3 py-1 rounded bg-pink-600 text-white"
                                                    >
                                                        Comprar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </section>
                        )}

                        {route === "sobre" && (
                            <section className="mt-8 bg-white rounded shadow p-6">
                                <h2 className="text-2xl font-bold mb-3">Sobre a AG Personalizados</h2>
                                <p className="text-gray-700">
                                    Somos uma pequena loja dedicada a transformar ideias em objetos especiais. 
                                    Fazemos canecas, camisetas, chaveiros e muito mais — tudo com cuidado manual 
                                    e acabamento de qualidade. Aceitamos encomendas para festas, lembranças 
                                    corporativas e presentes personalizados.
                                </p>
                            </section>
                        )}

                        {route === "contato" && (
                            <section className="mt-8 bg-white rounded shadow p-6">
                                <h2 className="text-2xl font-bold mb-3">Fale com a gente</h2>
                                <p className="text-gray-700 mb-3">
                                    Envie sua ideia ou peça um orçamento. Respondemos em até 24h (dias úteis).
                                </p>
                                <form 
                                    onSubmit={(e) => { 
                                        e.preventDefault(); 
                                        alert('Mensagem enviada! (mock)'); 
                                    }} 
                                    className="grid gap-3 max-w-xl"
                                >
                                    <input required placeholder="Seu nome" className="px-3 py-2 border rounded" />
                                    <input required type="email" placeholder="Seu email" className="px-3 py-2 border rounded" />
                                    <textarea required placeholder="Escreva sua ideia / pedido" className="px-3 py-2 border rounded h-28" />
                                    <div className="flex gap-3">
                                        <button type="submit" className="px-4 py-2 rounded bg-pink-600 text-white">Enviar</button>
                                        <button 
                                            type="button" 
                                            onClick={() => { 
                                                navigator.clipboard?.writeText('(11) 9XXXX-XXXX'); 
                                                alert('Telefone copiado (exemplo)'); 
                                            }} 
                                            className="px-4 py-2 rounded border"
                                        >
                                            Copiar WhatsApp
                                        </button>
                                    </div>
                                </form>
                            </section>
                        )}

                        {route === "cart" && (
                            <section className="mt-8 bg-white rounded shadow p-6">
                                <h2 className="text-2xl font-bold mb-3">Carrinho</h2>
                                {cart.length === 0 ? (
                                    <div className="text-gray-600">Seu carrinho está vazio.</div>
                                ) : (
                                    <div className="grid gap-4">
                                        {cart.map((item) => (
                                            <div key={item.id} className="flex items-center gap-4 border-b pb-3">
                                                <img src={item.img} alt={item.title} className="w-20 h-20 object-cover rounded" />
                                                <div className="flex-1">
                                                    <div className="font-semibold">{item.title}</div>
                                                    <div className="text-sm text-gray-600">R$ {item.price.toFixed(2)}</div>
                                                    <div className="mt-2 flex items-center gap-2">
                                                        <button 
                                                            onClick={() => updateQty(item.id, item.qty - 1)} 
                                                            className="px-2 py-1 border rounded"
                                                        >
                                                            -
                                                        </button>
                                                        <div className="px-3">{item.qty}</div>
                                                        <button 
                                                            onClick={() => updateQty(item.id, item.qty + 1)} 
                                                            className="px-2 py-1 border rounded"
                                                        >
                                                            +
                                                        </button>
                                                    </div>
                                                </div>
                                                <div className="text-right">
                                                    <div className="font-bold">R$ {(item.price * item.qty).toFixed(2)}</div>
                                                    <button 
                                                        onClick={() => removeFromCart(item.id)} 
                                                        className="text-sm mt-2 text-red-500"
                                                    >
                                                        Remover
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                        <div className="text-right">
                                            <div className="text-lg font-semibold">Subtotal: R$ {subtotal.toFixed(2)}</div>
                                            <div className="mt-3 flex justify-end gap-3">
                                                <button 
                                                    onClick={() => { 
                                                        setCart([]); 
                                                        alert('Carrinho limpo (mock)'); 
                                                    }} 
                                                    className="px-4 py-2 border rounded"
                                                >
                                                    Limpar
                                                </button>
                                                <button 
                                                    onClick={() => setRoute('checkout')} 
                                                    className="px-4 py-2 rounded bg-pink-600 text-white"
                                                >
                                                    Fechar pedido
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </section>
                        )}

                        {route === 'checkout' && (
                            <section className="mt-8 bg-white rounded shadow p-6 max-w-2xl">
                                <h2 className="text-2xl font-bold mb-3">Finalizar pedido</h2>
                                <p className="text-gray-600 mb-4">
                                    Este checkout é um mock para ilustração. Integre Stripe, PagSeguro, 
                                    MercadoPago ou PIX na publicação final.
                                </p>
                                <form 
                                    onSubmit={(e) => { 
                                        e.preventDefault(); 
                                        alert('Pedido enviado! (mock)'); 
                                        setCart([]); 
                                        setRoute('home'); 
                                    }} 
                                    className="grid gap-3"
                                >
                                    <input required placeholder="Nome completo" className="px-3 py-2 border rounded" />
                                    <input required placeholder="Endereço para entrega" className="px-3 py-2 border rounded" />
                                    <input required placeholder="Telefone / WhatsApp" className="px-3 py-2 border rounded" />
                                    <select className="px-3 py-2 border rounded">
                                        <option>Pagamento via PIX</option>
                                        <option>Cartão (integração)</option>
                                    </select>
                                    <div className="flex gap-3">
                                        <button className="px-4 py-2 rounded bg-pink-600 text-white">Confirmar</button>
                                        <button 
                                            type="button" 
                                            onClick={() => setRoute('cart')} 
                                            className="px-4 py-2 border rounded"
                                        >
                                            Voltar ao carrinho
                                        </button>
                                    </div>
                                </form>
                            </section>
                        )}
                    </main>

                    <footer className="bg-white mt-12 py-6">
                        <div className="max-w-6xl mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4">
                            <div className="text-sm">© {new Date().getFullYear()} AG Personalizados — Feito com ❤</div>
                            <div className="text-sm">
                                Contato:{" "}
                                <button 
                                    onClick={() => { 
                                        navigator.clipboard?.writeText('contato@agpersonalizados.com'); 
                                        alert('Email copiado (exemplo)'); 
                                    }} 
                                    className="underline"
                                >
                                    contato@agpersonalizados.com
                                </button>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        // Renderizar o componente
        ReactDOM.render(<LojaPersonalizados />, document.getElementById('root'));
    </script>
</body>
</html>